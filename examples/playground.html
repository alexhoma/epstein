<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Epstein playground</title>
    <script type="text/javascript" src="./books.js"></script>
    <script type="text/javascript" src="../dist/epstein.umd.js"></script>
  </head>
  <body>
    <input id="search" type="search"/>
    <div id="results">No results</div>

    <script type="text/javascript">
      var searchInput = document.querySelector('#search');
      var resultsContainer = document.querySelector('#results');
      var books = books.map(function transformBooks(book) {
        return {title: book.title, author: book.author, content: book.content};
      });

      // create books index
      console.time('indexing');
      var booksIndex = epstein(books);
      console.timeEnd('indexing');

      // on input change, go search!
      searchInput.addEventListener('change', function onUserSearch(e) {
        var results = booksIndex.search(e.target.value);
        resultsContainer.innerHTML = '';

        results.map(function renderResults(result) {
          var div = document.createElement("DIV");
          div.innerHTML = `${result.title} - ${result.author}`;
          resultsContainer.appendChild(div);
        });
      })
    </script>
  </body>
</html>